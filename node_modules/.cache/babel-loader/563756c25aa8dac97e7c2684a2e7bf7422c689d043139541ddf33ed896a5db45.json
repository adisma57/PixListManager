{"ast":null,"code":"// src/services/authService.js\nconst CLIENT_ID = '2e6b08b351044408b418683cb45af6dd';\nconst REDIRECT_URI = 'http://localhost:3000/';\nconst AUTH_ENDPOINT = 'https://accounts.spotify.com/authorize';\nconst RESPONSE_TYPE = 'token';\nexport function login() {\n  const scope = [\"user-read-private\", \"user-read-email\", \"playlist-modify-public\", \"playlist-modify-private\", \"playlist-read-private\", \"playlist-read-collaborative\", \"user-library-read\", \"user-library-modify\", \"user-read-playback-state\", \"user-modify-playback-state\", \"user-read-currently-playing\", \"user-follow-read\", \"user-follow-modify\", \"streaming\", \"app-remote-control\"].join(\" \");\n  const authUrl = `${AUTH_ENDPOINT}?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=${RESPONSE_TYPE}&scope=${encodeURIComponent(scope)}`;\n  window.location = authUrl;\n}\nexport function logout() {\n  localStorage.removeItem('spotify_token');\n  window.location.reload();\n}\nexport function isAuthenticated() {\n  return localStorage.getItem('spotify_token') !== null;\n}\nexport function setTokenFromUrl() {\n  const hash = window.location.hash;\n  if (hash) {\n    var _hash$substring$split;\n    const token = (_hash$substring$split = hash.substring(1).split('&').find(elem => elem.startsWith('access_token'))) === null || _hash$substring$split === void 0 ? void 0 : _hash$substring$split.split('=')[1];\n    if (token) {\n      localStorage.setItem('spotify_token', token);\n      window.history.pushState(\"\", document.title, window.location.pathname + window.location.search);\n    }\n  }\n}\nexport function getToken() {\n  return localStorage.getItem('spotify_token');\n}","map":{"version":3,"names":["CLIENT_ID","REDIRECT_URI","AUTH_ENDPOINT","RESPONSE_TYPE","login","scope","join","authUrl","encodeURIComponent","window","location","logout","localStorage","removeItem","reload","isAuthenticated","getItem","setTokenFromUrl","hash","_hash$substring$split","token","substring","split","find","elem","startsWith","setItem","history","pushState","document","title","pathname","search","getToken"],"sources":["C:/Users/Pix/Documents/Projects/spotify-app/src/services/authService.js"],"sourcesContent":["// src/services/authService.js\r\nconst CLIENT_ID = '2e6b08b351044408b418683cb45af6dd';\r\nconst REDIRECT_URI = 'http://localhost:3000/';\r\nconst AUTH_ENDPOINT = 'https://accounts.spotify.com/authorize';\r\nconst RESPONSE_TYPE = 'token';\r\n\r\nexport function login() {\r\n  const scope = [\r\n    \"user-read-private\",\r\n    \"user-read-email\",\r\n    \"playlist-modify-public\",\r\n    \"playlist-modify-private\",\r\n    \"playlist-read-private\",\r\n    \"playlist-read-collaborative\",\r\n    \"user-library-read\",\r\n    \"user-library-modify\",\r\n    \"user-read-playback-state\",\r\n    \"user-modify-playback-state\",\r\n    \"user-read-currently-playing\",\r\n    \"user-follow-read\",\r\n    \"user-follow-modify\",\r\n    \"streaming\",\r\n    \"app-remote-control\"\r\n  ].join(\" \");\r\n  \r\n  const authUrl = `${AUTH_ENDPOINT}?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=${RESPONSE_TYPE}&scope=${encodeURIComponent(scope)}`;\r\n  window.location = authUrl;\r\n}\r\n\r\nexport function logout() {\r\n  localStorage.removeItem('spotify_token');\r\n  window.location.reload();\r\n}\r\n\r\nexport function isAuthenticated() {\r\n  return localStorage.getItem('spotify_token') !== null;\r\n}\r\n\r\nexport function setTokenFromUrl() {\r\n  const hash = window.location.hash;\r\n  if (hash) {\r\n    const token = hash\r\n      .substring(1)\r\n      .split('&')\r\n      .find(elem => elem.startsWith('access_token'))\r\n      ?.split('=')[1];\r\n    if (token) {\r\n      localStorage.setItem('spotify_token', token);\r\n      window.history.pushState(\"\", document.title, window.location.pathname + window.location.search);\r\n    }\r\n  }\r\n}\r\n\r\nexport function getToken() {\r\n  return localStorage.getItem('spotify_token');\r\n}\r\n"],"mappings":"AAAA;AACA,MAAMA,SAAS,GAAG,kCAAkC;AACpD,MAAMC,YAAY,GAAG,wBAAwB;AAC7C,MAAMC,aAAa,GAAG,wCAAwC;AAC9D,MAAMC,aAAa,GAAG,OAAO;AAE7B,OAAO,SAASC,KAAKA,CAAA,EAAG;EACtB,MAAMC,KAAK,GAAG,CACZ,mBAAmB,EACnB,iBAAiB,EACjB,wBAAwB,EACxB,yBAAyB,EACzB,uBAAuB,EACvB,6BAA6B,EAC7B,mBAAmB,EACnB,qBAAqB,EACrB,0BAA0B,EAC1B,4BAA4B,EAC5B,6BAA6B,EAC7B,kBAAkB,EAClB,oBAAoB,EACpB,WAAW,EACX,oBAAoB,CACrB,CAACC,IAAI,CAAC,GAAG,CAAC;EAEX,MAAMC,OAAO,GAAG,GAAGL,aAAa,cAAcF,SAAS,iBAAiBQ,kBAAkB,CAACP,YAAY,CAAC,kBAAkBE,aAAa,UAAUK,kBAAkB,CAACH,KAAK,CAAC,EAAE;EAC5KI,MAAM,CAACC,QAAQ,GAAGH,OAAO;AAC3B;AAEA,OAAO,SAASI,MAAMA,CAAA,EAAG;EACvBC,YAAY,CAACC,UAAU,CAAC,eAAe,CAAC;EACxCJ,MAAM,CAACC,QAAQ,CAACI,MAAM,CAAC,CAAC;AAC1B;AAEA,OAAO,SAASC,eAAeA,CAAA,EAAG;EAChC,OAAOH,YAAY,CAACI,OAAO,CAAC,eAAe,CAAC,KAAK,IAAI;AACvD;AAEA,OAAO,SAASC,eAAeA,CAAA,EAAG;EAChC,MAAMC,IAAI,GAAGT,MAAM,CAACC,QAAQ,CAACQ,IAAI;EACjC,IAAIA,IAAI,EAAE;IAAA,IAAAC,qBAAA;IACR,MAAMC,KAAK,IAAAD,qBAAA,GAAGD,IAAI,CACfG,SAAS,CAAC,CAAC,CAAC,CACZC,KAAK,CAAC,GAAG,CAAC,CACVC,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACC,UAAU,CAAC,cAAc,CAAC,CAAC,cAAAN,qBAAA,uBAHlCA,qBAAA,CAIVG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACjB,IAAIF,KAAK,EAAE;MACTR,YAAY,CAACc,OAAO,CAAC,eAAe,EAAEN,KAAK,CAAC;MAC5CX,MAAM,CAACkB,OAAO,CAACC,SAAS,CAAC,EAAE,EAAEC,QAAQ,CAACC,KAAK,EAAErB,MAAM,CAACC,QAAQ,CAACqB,QAAQ,GAAGtB,MAAM,CAACC,QAAQ,CAACsB,MAAM,CAAC;IACjG;EACF;AACF;AAEA,OAAO,SAASC,QAAQA,CAAA,EAAG;EACzB,OAAOrB,YAAY,CAACI,OAAO,CAAC,eAAe,CAAC;AAC9C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}